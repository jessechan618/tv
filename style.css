:root{
  --bg:#0b0f14;
  --elev:#111723;
  --elev-2:#0e1622;
  --text:#e6eefc;
  --muted:#96a3b8;
  --brand:#8ab4ff;
  --accent:#a7f3d0;
  --danger:#ff7a7a;
  --ring:#3b82f6;
  --radius:14px;
  --topbar-h: 56px;
}
:root.theme-violet{ --bg:#0b0920; --elev:#141132; --elev-2:#0e0b28; --brand:#9aa6ff; --accent:#c4b5fd }
:root.theme-emerald{ --bg:#04130e; --elev:#0c1f18; --elev-2:#0a1a14; --brand:#7ee0b5; --accent:#a7f3d0 }
:root.theme-rose{ --bg:#1a0b0f; --elev:#2a1318; --elev-2:#200f14; --brand:#ffb4c8; --accent:#fecdd3 }
*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  background: radial-gradient(1200px 600px at 10% -10%, #142033 0, transparent 60%), var(--bg);
  color:var(--text);
  font: 16px/1.5 system-ui, -apple-system, Segoe UI, Roboto, Noto Sans;
}
.topbar{
  position:sticky; top:0; z-index:10;
  background:linear-gradient(180deg, rgba(0,0,0,.55), rgba(0,0,0,0));
  backdrop-filter: blur(8px);
  padding:10px 14px; border-bottom:1px solid #142032;
  display:flex; align-items:center; justify-content:space-between;
}
.brand{display:flex; gap:10px; align-items:center}
.logo-img{width:32px; height:32px; border-radius:8px; object-fit:cover; box-shadow:0 2px 6px rgba(0,0,0,.3)}
.brand .title{display:flex; flex-direction:column; line-height:1.1}
.brand .title strong{font-size:16px}
.brand .title .sub{font-size:12px; color:var(--muted)}
.brand-discord{margin-left:8px}
.nav{display:flex; align-items:center; gap:10px}
.iconbtn{
  position:relative;
  display:inline-grid; place-items:center; width:36px; height:36px; border-radius:999px;
  border:1px solid #1e2a3d; background:#0c1626; color:var(--text); cursor:pointer;
}
.iconbtn.tiny{width:30px; height:30px}
.iconbtn svg{width:20px; height:20px; fill:#c9d5f0}
.iconbtn[aria-pressed="true"]{outline:3px solid rgba(138,180,255,.35)}
.iconbtn.ghost{background:transparent}
.dot{
  position:absolute; right:-2px; top:-2px; width:10px; height:10px; border-radius:999px; border:1px solid #1a2433;
  background:#6b7280;
}
.dot[data-status="live"]{ background:#10b981 }
.dot[data-status="offline"]{ background:#ef4444 }
.dot[data-status="unknown"]{ background:#6b7280 }
.log{ display:flex; align-items:center; gap:6px; padding:8px 12px; border-radius:999px; text-decoration:none;
  border:1px solid #1e2a3d; background:#0c1626; color:var(--text); font-size:14px; }
.log svg{width:18px; height:18px; fill:#c9d5f0}
.discord{ display:inline-grid; place-items:center; width:36px; height:36px; border-radius:999px;
  background:#202c3f; border:1px solid #2a3a56; }
.discord svg{width:22px; height:22px; fill:#c9d5f0}
.layout{max-width:none; margin:0; padding:10px}
.card{
  background: linear-gradient(180deg, var(--elev), var(--elev-2));
  border:1px solid #1a2433;
  border-radius: var(--radius);
  box-shadow: 0 10px 30px rgba(0,0,0,.35), 0 1px inset rgba(255,255,255,.03);
  overflow:hidden;
}
.stage-header{display:flex; align-items:center; justify-content:space-between; gap:16px; padding:10px 12px; border-bottom:1px solid #1a2433}
.stage-header h2{margin:0; font-size:16px}
.split{display:grid; grid-template-columns: 1fr 320px; gap:0}
@media (max-width: 980px){ .split{ grid-template-columns: 1fr } }
.videoPane{padding:0; position:relative}
.chatPane{border-left:1px solid #1a2433; min-height:60vh}
.twitchMount, #kickFrame{display:block; width:100%; height:var(--stage-h, 82vh); border:0}
.notice{position:absolute; left:12px; bottom:8px; margin:0; padding:6px 10px; color:#cfe1ff; background:rgba(17,23,35,.6); border:1px solid #24324b; border-radius:10px; font-size:13px}
#chatFrame{display:block; width:100%; height:var(--stage-h, 82vh); border:0}
.footer{padding:6px; color:#9fb1cf; font-size:14px}
.foot-inner{max-width:1400px; margin:0 auto; display:flex; gap:10px; align-items:center; justify-content:space-between}
html, body{overflow:hidden}
body.full, html.full-root{overflow:hidden}
body.full .layout{max-width:none; padding:0}
body.full .stage{border-radius:0; border:0}
body.full .stage-header{display:none}
body.full .notice{display:none}
body.full .split{ grid-template-columns: 1fr 360px; height: calc(100dvh - var(--topbar-h)); }
body.full .twitchMount, body.full #kickFrame, body.full #chatFrame{ height: calc(100dvh - var(--topbar-h)); }

/* --- Live Stats Bar --- */
.topbar { display:flex; gap:12px; align-items:center; }
.topbar .live-stats { margin-left:auto; display:flex; gap:10px; align-items:center; }
.topbar .live-stats span { background: var(--elev); padding: 6px 10px; border-radius: 8px; line-height:1; }
.topbar .live-stats #totalViewers { background: var(--accent, #2a9d8f); }


/* --- Title inline live stats --- */

.title .title-stats { display: inline-flex; gap: 8px; margin-left: 10px; }

.title .title-stats #totalViewers { background: var(--accent, #2a9d8f); }


/* --- Icon viewer stats (theme-aware) --- */
.title .title-stats .stat{
  display:inline-flex;align-items:center;gap:6px;
  background:var(--elev-2);
  color:var(--text);
  padding:4px 10px;border-radius:8px;
  border:1px solid rgba(255,255,255,.06);
  line-height:1;
}
.title .title-stats .stat svg{ display:inline-block;width:16px;height:16px; fill: currentColor; }



/* --- Platform icon colors --- */
.title .title-stats .stat svg { fill: #cbd5e1; }
#twitchStat{ color:#9146FF; }  /* Twitch purple */
#kickStat{ color:#52FF00; }    /* Kick green */
#totalViewers{ color: var(--brand); }
.title .title-stats .total strong { font-weight: 700; }


/* Icon image alignment */
.title .title-stats .stat img { vertical-align: middle; }


/* Total stat: background removed, uses brand color */
.title .title-stats .stat.total{
  background: transparent;
  border: 0;
  padding: 0 6px;
  color: var(--brand);
}
.title .title-stats .stat.total svg{ fill: currentColor; }


/* --- Strong override for total viewer pill --- */
.title .title-stats span#totalViewers,
.title .title-stats .stat.total#totalViewers {
  background: transparent !important;
  border: 0 !important;
  padding: 0 6px !important;
  color: var(--brand);
}
.title .title-stats span#totalViewers svg { fill: currentColor; }


/* Explicit platform pills */
.title .title-stats #twitchStat { background: var(--elev-2); color:#9146FF; padding:4px 10px; border-radius:8px; border:1px solid rgba(255,255,255,.06); }
.title .title-stats #kickStat { background: var(--elev-2); color:#52FF00; padding:4px 10px; border-radius:8px; border:1px solid rgba(255,255,255,.06); }
.title .title-stats #twitchStat svg,
.title .title-stats #kickStat svg { fill: currentColor; }


/* === Mobile scrolling fixes (appended) === */
/* On small screens, allow page to scroll and avoid locking the stage to viewport height */
@media (max-width: 980px) {
  html, body { height: auto !important; min-height: 100% !important; }
  body.full, html.full-root { overflow: auto !important; }

  /* Grid container should size to content so the chat can flow below video */
  .split { height: auto !important; }
  body.full .split { height: auto !important; }

  /* Players/chat: stop using fixed viewport heights; allow content to extend page */
  .twitchMount, #kickFrame, #chatFrame { height: auto !important; min-height: 320px; }
  .chatPane { min-height: 50vh; } /* ensure chat has room when stacked */
}


/* --- Live status chip --- */
.chip{
  display:inline-flex; align-items:center; gap:6px;
  padding:2px 8px; border-radius:999px; font-size:12px; line-height:1.6;
  border:1px solid rgba(255,255,255,.08);
}
.chip .dot{ width:8px; height:8px; border-radius:999px; background: currentColor; display:inline-block; }
.chip.offline{ background: var(--elev-2); color: var(--muted); }
.chip.live{ background: #16a34a; color: #0a1f12; border-color: rgba(0,0,0,.1); }


/* === Mobile visibility enhancements (appended) === */
@media (max-width: 768px){
  /* Readable base text */
  html { font-size: 16px; }
  body { line-height: 1.6; }

  /* Title and stats wrap cleanly, larger touch targets */
  .title { display:flex; flex-wrap: wrap; gap: 8px; }
  .title .title-stats { display:inline-flex; flex-wrap: wrap; gap: 8px; }
  .title .title-stats .stat { padding: 4px 8px; font-size: 14px; }
  .title .title-stats .stat svg { width: 18px; height: 18px; }

  /* Buttons/icons bigger for fingers */
  .iconbtn { width: 44px; height: 44px; }
  .iconbtn svg { width: 22px; height: 22px; }
  .iconbtn .dot { width: 10px; height: 10px; }

  /* Status chip slightly larger */
  .chip { font-size: 13px; }
}

/* Stack layout & give chat/player more room on small phones */
@media (max-width: 600px){
  .split { display: grid; grid-template-columns: 1fr; gap: 12px; height: auto !important; }
  .videoPane, .chatPane { width: 100%; }
  /* Ensure embeds fill width but have reasonable height */
  .twitchMount, #kickFrame, #chatFrame, iframe, video {
    width: 100%;
    max-width: 100%;
    min-height: 360px;
    height: auto;
  }
}

/* Very small devices */
@media (max-width: 480px){
  .title { flex-direction: column; align-items: flex-start; }
  .iconbtn { width: 48px; height: 48px; }
  .iconbtn svg { width: 24px; height: 24px; }
  .twitchMount, #kickFrame, #chatFrame, iframe, video { min-height: 300px; }
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce){
  * { animation-duration: 0.01ms !important; transition-duration: 0.01ms !important; animation-iteration-count: 1 !important; }
}


/* === Mobile chat gap fix (appended) === */
/* On small screens, remove artificial min-heights causing extra space below chat */
@media (max-width: 768px){
  .chatPane{ min-height: 0 !important; }
  /* Let the chat iframe size itself reasonably without forcing huge empty space */
  #chatFrame{ height: auto !important; min-height: 320px; }
  /* Ensure the container can shrink to content */
  .split{ height: auto !important; }
}


/* Hide any legacy inline notice */
.notice, .kick-notice, #kickNoticeInline { display: none !important; }

/* Toast styles (bottom-left, above footer & safe area) */
.toast{
  position: fixed;
  left: 16px;
  bottom: calc(var(--footer-h, 44px) + env(safe-area-inset-bottom, 0) + 12px);
  max-width: min(92vw, 420px);
  display: flex; gap: 10px; align-items: center;
  background: var(--elev);
  color: var(--text);
  border: 1px solid #24324b;
  border-radius: 12px;
  padding: 10px 12px;
  box-shadow: 0 10px 30px rgba(0,0,0,.35);
  z-index: 1000;
}
.toast.hidden { display: none; }
.toast .toast-close{
  margin-left: auto; background: transparent; border: 0;
  color: inherit; font-size: 20px; line-height: 1; cursor: pointer;
}

/* Ensure footer reserves space so toast never covers Â© YinLove */
footer, .footer { --footer-h: 44px; min-height: var(--footer-h); }
@media (max-width: 600px){
  footer, .footer { --footer-h: 56px; }
}
